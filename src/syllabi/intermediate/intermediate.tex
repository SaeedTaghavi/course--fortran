%%----------------------------------------------------------------------------80
%% Preamble
%%----------------------------------------------------------------------------80
\documentclass[12pt, twoside, a4paper, final]{article}
\usepackage[some]{background}
\usepackage[utf8]{inputenc}
\usepackage[spanish]{babel}
\usepackage[T1]{fontenc}
\usepackage{pgfcalendar}
\usepackage{pdflscape}
\usepackage{colortbl}
\usepackage{enumitem}
\usepackage{fancyhdr}
\usepackage{graphicx}
\usepackage{geometry}
\usepackage{hyperref}
\usepackage{multirow}
\usepackage{pgfplots}
\usepackage{tabularx}
\usepackage{titlesec}
\usepackage{amsmath}
\usepackage{caption}
\usepackage{charter}
\usepackage{hologo}
\usepackage{lipsum}
\usepackage{xcolor}
\usepackage{array}
\usepackage{avant}


%%----------------------------------------------------------------------------80
%% Settings
%%----------------------------------------------------------------------------80
% Hyperref package settings --------------------------------------------------80
\hypersetup{
  pdftitle={Programación con Fortran - Nivel Intermedio},
  pdfauthor={Mart\'{i}n Josemar\'{i}a Vuelta Rojas},
  pdfpagelayout=OneColumn,
  pdfnewwindow=true,
  pdfdisplaydoctitle=true,
  pdfstartview=XYZ,
  plainpages=false,
  hidelinks=false,
  unicode=true,
  bookmarksnumbered=true,
  bookmarksopen=true,
  bookmarksopenlevel=3,
  breaklinks=true,
  colorlinks=true,
  pdfborder={0 0 0}
}


% caption poackage settings --------------------------------------------------80
% \captionsetup[figure]{
%   labelfont=bf,
%   justification=centering
% }


% pgfplots package settings --------------------------------------------------80
\pgfplotsset{compat=1.15}
% \usepgfplotslibrary{dateplot}
% \usepgfplotslibrary{groupplots}


%%----------------------------------------------------------------------------80
%% Customizations
%%----------------------------------------------------------------------------80
% Cover shapes ---------------------------------------------------------------80
\backgroundsetup{
  scale=1,
  angle=0,
  opacity=1,
  contents={
  \begin{tikzpicture}[
      remember picture,
      overlay
    ]
    \path[
      fill=red-softbutterfly
    ] (current page.north west) rectangle (-8.5, 0);
    \path[
      fill=blue-softbutterfly
    ] (current page.south west) rectangle (-8.5, 0);
  \end{tikzpicture}
  }
}


% Fonts customization --------------------------------------------------------80
% Customizing chapter heading
% Font family: sans serif
\titleformat{\title}[display]{
  \normalfont\sffamily\Huge\bfseries\color{grey-800}
}{}{0pt}{}

% Customizing section heading
% Font family: sans serif
\titleformat{\section}{
  \normalfont\sffamily\large\bfseries\color{grey-800}
}{\thesection}{1em}{}

% Customizing section heading
% Font family: sans serif
\titleformat{\subsection}{
  \normalfont\sffamily\normalsize\bfseries\color{grey-800}
}{\thesubsection}{1em}{}


% Page geometry customization ------------------------------------------------80
% Customizing header spacings
\geometry{
  a4paper,
  headheight=25pt,
  headsep=12pt,
}


%%----------------------------------------------------------------------------80
%% Command definitions
%%----------------------------------------------------------------------------80
\makeatletter

% Colors ---------------------------------------------------------------------80
% Softbutterfly colors
\definecolor{red-softbutterfly}{HTML}{C83737}
\definecolor{blue-softbutterfly}{HTML}{162D50}

% Material design colors
\definecolor{white}{HTML}{FFFFFF}

\definecolor{red-500}{HTML}{F44336}
\definecolor{red-A700}{HTML}{D50000}

\definecolor{blue-50}{HTML}{E3F2FD}
\definecolor{blue-100}{HTML}{BBDEFB}
\definecolor{blue-800}{HTML}{1565C0}

\definecolor{grey-50}{HTML}{FAFAFA}
\definecolor{grey-800}{HTML}{424242}
\definecolor{grey-900}{HTML}{212121}

% Command for setting global color
\newcommand{\globalcolor}[1]{
  \color{#1}\global\let\default@color\current@color
}


% Fonts definitions ----------------------------------------------------------80
% Redefining default document font family
% Font family: serif
\renewcommand{\familydefault}{\rmdefault}


% Parragraph spacings --------------------------------------------------------80
% \setlength{\parindent}{4em}
% \setlength{\parskip}{0.5em}


% Table columns types --------------------------------------------------------80
\newcolumntype{L}[1]{>{\raggedright\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{C}[1]{>{\centering\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}
\newcolumntype{R}[1]{>{\raggedleft\let\newline\\\arraybackslash\hspace{0pt}}m{#1}}

% Color box decoration -------------------------------------------------------80
\newcommand{\headerbox}[2][]{
  \tikz[overlay]
  \node[fill=blue!20,inner sep=4pt, anchor=text, rectangle, rounded corners=1mm, #1] {#2};
  \phantom{#2}
}

\newcommand{\scorebox}[2][]{
  \tikz[overlay]
  \node[fill=blue!20,inner sep=10pt, anchor=text, rectangle, rounded corners=1mm, #1] {#2};
  \phantom{#2}
}

% Clear double page definition -----------------------------------------------80
% Use of "This page is intentionally left in blank." for better UX
% Use of "Página intencionalmente dejada en blanco." for better UX
\def\cleardoubleintentionalpage{
  \clearpage%
  \if@twoside%
  \ifodd%
    \c@page%
  \else%
    \vspace*{\fill}%
    \begin{center}%
    % For spanish:
    \rm\emph{Página intencionalmente dejada en blanco.}
    % For english:
    % \rm\emph{This page is intentionally left in blank.}
    \end{center}%
    \vspace{\fill}%
    \thispagestyle{empty}%
    \newpage%
    \if@twocolumn%
    \hbox{}%
    \newpage%
    \fi%
  \fi%
  \fi%
}

% Completely white page
\def\cleardoublepage{
  \clearpage%
  \if@twoside%
  \ifodd%
    \c@page%
  \else%
    \vspace{\fill}%
    \thispagestyle{empty}%
    \newpage%
    \if@twocolumn%
    \hbox{}%
    \newpage%
    \fi%
  \fi%
  \fi%
}

% Flip margin ----------------------------------------------------------------80
\newcommand*{\flipmargins}{%
  \clearpage
  \setlength{\@tempdima}{\oddsidemargin}%
  \setlength{\oddsidemargin}{\evensidemargin}%
  \setlength{\evensidemargin}{\@tempdima}%
  \if@reversemargin
  \normalmarginpar
  \else
  \reversemarginpar
  \fi
}


% Page style definition ------------------------------------------------------80
% Plain Style
\fancypagestyle{plain}{%
  \fancyhead{}%
  \renewcommand{\headrulewidth}{0pt}
}

% Fancy Style
\fancypagestyle{fancy}{
  \fancyhf{}
  \renewcommand{\headrulewidth}{1pt}%
  \renewcommand{\footrulewidth}{0pt}%
  \fancyhead[EL]{
    % Make use of your own phrase
    Fortran
  }
  \fancyhead[OR]{
    % Make use of your own phrase
    \noindent\softbutterflylogo{3.5cm}\par
  }
  \fancyfoot[C]{
  {
  \begin{centering}
    \thepage
  \end{centering}
  }
  }
}

% noindent environment -------------------------------------------------------80
\newenvironment{noindented}{
  \par\setlength{\parindent}{0em}
}
{\par}

% Some useful symbols --------------------------------------------------------80
% Registered Mark
\newcommand{\registeredmark}{\textsuperscript{\small{\textregistered}}}

% SoftButterfly logo
\newcommand{\softbutterflylogo}[1]{
  \includegraphics[width=#1]{../resources/SoftButterfly-LaTeX-Logo.pdf}
}


\makeatother


%%----------------------------------------------------------------------------80
%% Document
%%----------------------------------------------------------------------------80
% Global document settings ---------------------------------------------------80
\AtBeginDocument{
  \globalcolor{grey-900}
}


% Document body --------------------------------------------------------------80
\begin{document}
  % BEGIN: Cover pager
  \begin{titlepage}
    \BgThispage
    \newgeometry{left=5cm,top=6cm,bottom=6cm,right=3.5cm}
    \begin{noindented}
      \setlength{\parskip}{0.5em}
      {
        \softbutterflylogo{7cm}
        \vspace{-1em}
      }
      \par
      {%
        \color{red-softbutterfly}
        \makebox[0pt][l]{
          \rule{1.3\textwidth}{1pt}
        }%
      }
      \par
      {
        \color{blue-softbutterfly}
        \textsf{
          \textbf{
            \textsc{Propuesta técnica de cruso de capacitación}
          }
        }
      }
      \par
      \vfill
      {
        \huge
        \textsf{Programación en Fortran}
      }
      \par
      {
        \large
        \textsf{Nivel intermedio}
      }
      \par
      \vfill
      {
        \color{blue-softbutterfly}
        \textsf{Sílabo elaborado por}
      }
      \par
      {
        \large
        \textsf{Martín Josemaría Vuelta Rojas}
      }
      \vskip\baselineskip
      \textsf{Lima, \today}
    \end{noindented}
    \afterpage{
      \cleardoubleintentionalpage
    }
  \end{titlepage}
  \restoregeometry

  % BEGIN: Report content
  \input{sections/00_title}
  \input{sections/01_introduction}
  \input{sections/02_details}
  \input{sections/03_sillabus}
\end{document}
